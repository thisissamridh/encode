"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.blockchainStatusFromJson = exports.blockchainStatusToJson = exports.blockchainBridgeFromJson = exports.blockchainBridgeToJson = exports.blockchainAssetFromJson = exports.blockchainAssetToJson = exports.isAccountTx = exports.isDefiDepositTx = exports.numTxTypes = exports.TxType = void 0;
const address_1 = require("../address");
// TODO: Move to TxType module.
var TxType;
(function (TxType) {
    TxType[TxType["DEPOSIT"] = 0] = "DEPOSIT";
    TxType[TxType["TRANSFER"] = 1] = "TRANSFER";
    TxType[TxType["WITHDRAW_TO_WALLET"] = 2] = "WITHDRAW_TO_WALLET";
    TxType[TxType["WITHDRAW_HIGH_GAS"] = 3] = "WITHDRAW_HIGH_GAS";
    TxType[TxType["ACCOUNT"] = 4] = "ACCOUNT";
    TxType[TxType["DEFI_DEPOSIT"] = 5] = "DEFI_DEPOSIT";
    TxType[TxType["DEFI_CLAIM"] = 6] = "DEFI_CLAIM";
})(TxType = exports.TxType || (exports.TxType = {}));
exports.numTxTypes = 7;
function isDefiDepositTx(txType) {
    return txType === TxType.DEFI_DEPOSIT;
}
exports.isDefiDepositTx = isDefiDepositTx;
function isAccountTx(txType) {
    return txType === TxType.ACCOUNT;
}
exports.isAccountTx = isAccountTx;
const blockchainAssetToJson = ({ address, ...asset }) => ({
    ...asset,
    address: address.toString(),
});
exports.blockchainAssetToJson = blockchainAssetToJson;
const blockchainAssetFromJson = ({ address, ...asset }) => ({
    ...asset,
    address: address_1.EthAddress.fromString(address),
});
exports.blockchainAssetFromJson = blockchainAssetFromJson;
const blockchainBridgeToJson = ({ address, ...bridge }) => ({
    ...bridge,
    address: address.toString(),
});
exports.blockchainBridgeToJson = blockchainBridgeToJson;
const blockchainBridgeFromJson = ({ address, ...bridge }) => ({
    ...bridge,
    address: address_1.EthAddress.fromString(address),
});
exports.blockchainBridgeFromJson = blockchainBridgeFromJson;
function blockchainStatusToJson(status) {
    return {
        ...status,
        rollupContractAddress: status.rollupContractAddress.toString(),
        verifierContractAddress: status.verifierContractAddress.toString(),
        dataRoot: status.dataRoot.toString('hex'),
        nullRoot: status.nullRoot.toString('hex'),
        rootRoot: status.rootRoot.toString('hex'),
        defiRoot: status.defiRoot.toString('hex'),
        defiInteractionHashes: status.defiInteractionHashes.map(v => v.toString('hex')),
        assets: status.assets.map(exports.blockchainAssetToJson),
        bridges: status.bridges.map(exports.blockchainBridgeToJson),
    };
}
exports.blockchainStatusToJson = blockchainStatusToJson;
function blockchainStatusFromJson(json) {
    return {
        ...json,
        rollupContractAddress: address_1.EthAddress.fromString(json.rollupContractAddress),
        verifierContractAddress: address_1.EthAddress.fromString(json.verifierContractAddress),
        dataRoot: Buffer.from(json.dataRoot, 'hex'),
        nullRoot: Buffer.from(json.nullRoot, 'hex'),
        rootRoot: Buffer.from(json.rootRoot, 'hex'),
        defiRoot: Buffer.from(json.defiRoot, 'hex'),
        defiInteractionHashes: json.defiInteractionHashes.map(f => Buffer.from(f, 'hex')),
        assets: json.assets.map(exports.blockchainAssetFromJson),
        bridges: json.bridges.map(exports.blockchainBridgeFromJson),
    };
}
exports.blockchainStatusFromJson = blockchainStatusFromJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2tjaGFpbl9zdGF0dXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYmxvY2tjaGFpbi9ibG9ja2NoYWluX3N0YXR1cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3Q0FBd0M7QUFPeEMsK0JBQStCO0FBQy9CLElBQVksTUFRWDtBQVJELFdBQVksTUFBTTtJQUNoQix5Q0FBTyxDQUFBO0lBQ1AsMkNBQVEsQ0FBQTtJQUNSLCtEQUFrQixDQUFBO0lBQ2xCLDZEQUFpQixDQUFBO0lBQ2pCLHlDQUFPLENBQUE7SUFDUCxtREFBWSxDQUFBO0lBQ1osK0NBQVUsQ0FBQTtBQUNaLENBQUMsRUFSVyxNQUFNLEdBQU4sY0FBTSxLQUFOLGNBQU0sUUFRakI7QUFDWSxRQUFBLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFFNUIsU0FBZ0IsZUFBZSxDQUFDLE1BQWM7SUFDNUMsT0FBTyxNQUFNLEtBQUssTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN4QyxDQUFDO0FBRkQsMENBRUM7QUFFRCxTQUFnQixXQUFXLENBQUMsTUFBYztJQUN4QyxPQUFPLE1BQU0sS0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ25DLENBQUM7QUFGRCxrQ0FFQztBQVlNLE1BQU0scUJBQXFCLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBRSxHQUFHLEtBQUssRUFBbUIsRUFBdUIsRUFBRSxDQUFDLENBQUM7SUFDckcsR0FBRyxLQUFLO0lBQ1IsT0FBTyxFQUFFLE9BQU8sQ0FBQyxRQUFRLEVBQUU7Q0FDNUIsQ0FBQyxDQUFDO0FBSFUsUUFBQSxxQkFBcUIseUJBRy9CO0FBRUksTUFBTSx1QkFBdUIsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsS0FBSyxFQUF1QixFQUFtQixFQUFFLENBQUMsQ0FBQztJQUN2RyxHQUFHLEtBQUs7SUFDUixPQUFPLEVBQUUsb0JBQVUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDO0NBQ3hDLENBQUMsQ0FBQztBQUhV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